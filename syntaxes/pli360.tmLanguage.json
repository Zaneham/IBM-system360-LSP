{
  "name": "IBM System/360 PL/I F",
  "scopeName": "source.pli360",
  "patterns": [
    { "include": "#comments" },
    { "include": "#strings" },
    { "include": "#numbers" },
    { "include": "#procedures" },
    { "include": "#statements" },
    { "include": "#declarations" },
    { "include": "#attributes" },
    { "include": "#builtins" },
    { "include": "#conditions" },
    { "include": "#operators" },
    { "include": "#identifiers" }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.block.pli360",
          "begin": "/\\*",
          "end": "\\*/"
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "name": "string.quoted.single.pli360",
          "begin": "'",
          "end": "'",
          "patterns": [
            {
              "name": "constant.character.escape.pli360",
              "match": "''"
            }
          ]
        }
      ]
    },
    "numbers": {
      "patterns": [
        {
          "name": "constant.numeric.float.pli360",
          "match": "[+-]?\\d+\\.\\d+([Ee][+-]?\\d+)?"
        },
        {
          "name": "constant.numeric.binary.pli360",
          "match": "'[01]+'B"
        },
        {
          "name": "constant.numeric.integer.pli360",
          "match": "\\b\\d+\\b"
        }
      ]
    },
    "procedures": {
      "patterns": [
        {
          "name": "meta.procedure.pli360",
          "match": "\\b([A-Za-z_][A-Za-z0-9_@#$]*)\\s*:\\s*(PROC|PROCEDURE)\\b",
          "captures": {
            "1": { "name": "entity.name.function.pli360" },
            "2": { "name": "keyword.control.procedure.pli360" }
          }
        },
        {
          "name": "keyword.control.procedure.pli360",
          "match": "\\b(PROC|PROCEDURE|ENTRY|BEGIN|END|RETURN|CALL|RECURSIVE|REENTRANT|OPTIONS|MAIN)\\b"
        }
      ]
    },
    "statements": {
      "patterns": [
        {
          "name": "keyword.control.flow.pli360",
          "match": "\\b(IF|THEN|ELSE|DO|END|WHILE|UNTIL|TO|BY|REPEAT|LEAVE|ITERATE|GO|GOTO|SELECT|WHEN|OTHERWISE|STOP)\\b"
        },
        {
          "name": "keyword.control.io.pli360",
          "match": "\\b(GET|PUT|READ|WRITE|REWRITE|DELETE|LOCATE|OPEN|CLOSE|DISPLAY|WAIT)\\b"
        },
        {
          "name": "keyword.other.allocation.pli360",
          "match": "\\b(ALLOCATE|FREE|SAVE|RESTORE)\\b"
        },
        {
          "name": "keyword.other.exception.pli360",
          "match": "\\b(ON|SIGNAL|REVERT)\\b"
        },
        {
          "name": "keyword.other.io-options.pli360",
          "match": "\\b(FILE|DATA|LIST|EDIT|STRING|SKIP|PAGE|LINE|COLUMN|COPY|PRINT|INPUT|OUTPUT|UPDATE|STREAM|RECORD|SEQUENTIAL|DIRECT|KEYED|TRANSIENT|BUFFERED|UNBUFFERED|ENVIRONMENT|ENV|TITLE|LINESIZE|PAGESIZE)\\b"
        },
        {
          "name": "keyword.other.sort.pli360",
          "match": "\\b(SORT|GIVING|USING|ASCENDING|DESCENDING|COLLATE|RECORD|DUPLICATES)\\b"
        }
      ]
    },
    "declarations": {
      "patterns": [
        {
          "name": "keyword.other.declare.pli360",
          "match": "\\b(DCL|DECLARE|DEFINE|FORMAT)\\b"
        },
        {
          "name": "keyword.other.parameter.pli360",
          "match": "\\b(RETURNS|VALUE|BYADDR|BYVALUE)\\b"
        }
      ]
    },
    "attributes": {
      "patterns": [
        {
          "name": "storage.type.arithmetic.pli360",
          "match": "\\b(FIXED|FLOAT|DECIMAL|DEC|BINARY|BIN|REAL|COMPLEX|CPLX|PRECISION|PREC)\\b"
        },
        {
          "name": "storage.type.string.pli360",
          "match": "\\b(CHARACTER|CHAR|BIT|VARYING|VAR|GRAPHIC|WIDECHAR|PICTURE|PIC)\\b"
        },
        {
          "name": "storage.type.other.pli360",
          "match": "\\b(LABEL|POINTER|PTR|OFFSET|AREA|FILE|ENTRY|TASK|EVENT|CONDITION)\\b"
        },
        {
          "name": "storage.modifier.scope.pli360",
          "match": "\\b(EXTERNAL|EXT|INTERNAL|INT|STATIC|AUTOMATIC|AUTO|CONTROLLED|CTL|BASED|DEFINED|DEF|PARAMETER|BUILTIN)\\b"
        },
        {
          "name": "storage.modifier.structure.pli360",
          "match": "\\b(DIMENSION|DIM|INITIAL|INIT|POSITION|POS|ALIGNED|UNALIGNED|LIKE|REFER|UNION)\\b"
        },
        {
          "name": "storage.modifier.other.pli360",
          "match": "\\b(ABNORMAL|ABNL|NORMAL|CONNECTED|NONCONNECTED|SECONDARY|GENERIC|IRREDUCIBLE|REDUCIBLE|USES|SETS|NONASGN|ASSIGNABLE)\\b"
        }
      ]
    },
    "builtins": {
      "patterns": [
        {
          "name": "support.function.math.pli360",
          "match": "\\b(ABS|ADD|ATAN|ATAND|ATANH|CEIL|COS|COSD|COSH|ERF|ERFC|EXP|FLOOR|LOG|LOG10|LOG2|MAX|MIN|MOD|MULTIPLY|ROUND|SIGN|SIN|SIND|SINH|SQRT|TAN|TAND|TANH|TRUNC)\\b"
        },
        {
          "name": "support.function.string.pli360",
          "match": "\\b(BIT|BOOL|CHAR|COLLATE|COPY|DATE|DATETIME|DATETIM|HIGH|INDEX|LENGTH|LOW|REPEAT|REVERSE|SEARCH|STRING|SUBSTR|TIME|TRANSLATE|TRIM|UNSPEC|VERIFY)\\b"
        },
        {
          "name": "support.function.array.pli360",
          "match": "\\b(ALL|ANY|DIM|HBOUND|LBOUND|PROD|SUM)\\b"
        },
        {
          "name": "support.function.storage.pli360",
          "match": "\\b(ADDR|ALLOCATION|BINARYVALUE|BINVALUE|CURRENTSIZE|CURRENTSTORAGE|EMPTY|ENTRYADDR|NULL|OFFSET|POINTER|POINTERADD|POINTERVALUE|SIZE|STORAGE|SYSNULL)\\b"
        },
        {
          "name": "support.function.condition.pli360",
          "match": "\\b(DATAFIELD|ONCHAR|ONCODE|ONCONDID|ONCOUNT|ONFILE|ONKEY|ONLOC|ONSOURCE)\\b"
        },
        {
          "name": "support.function.conversion.pli360",
          "match": "\\b(BINARY|DECIMAL|FIXED|FLOAT|COMPLEX|IMAG|REAL|PRECISION)\\b"
        }
      ]
    },
    "conditions": {
      "patterns": [
        {
          "name": "constant.language.condition.pli360",
          "match": "\\b(AREA|ATTENTION|CONDITION|CONVERSION|CONV|ENDFILE|ENDPAGE|ERROR|FINISH|FIXEDOVERFLOW|FOFL|KEY|NAME|OVERFLOW|OFL|RECORD|SIZE|STRINGRANGE|STRINGSIZE|SUBSCRIPTRANGE|SUBRG|TRANSMIT|UNDEFINEDFILE|UNDERFLOW|UFL|ZERODIVIDE|ZDIV)\\b"
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "name": "keyword.operator.arithmetic.pli360",
          "match": "\\*\\*|\\*|/|\\+|-"
        },
        {
          "name": "keyword.operator.comparison.pli360",
          "match": "<=|>=|<>|¬=|\\^=|~=|<|>|="
        },
        {
          "name": "keyword.operator.logical.pli360",
          "match": "\\b(NOT|AND|OR)\\b|¬|\\^|~|&|\\|"
        },
        {
          "name": "keyword.operator.string.pli360",
          "match": "\\|\\|"
        },
        {
          "name": "keyword.operator.assignment.pli360",
          "match": "="
        }
      ]
    },
    "identifiers": {
      "patterns": [
        {
          "name": "variable.other.pli360",
          "match": "\\b[A-Za-z_][A-Za-z0-9_@#$]*\\b"
        }
      ]
    }
  }
}
